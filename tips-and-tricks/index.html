<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation (Wiki) for EMS-ESP"><link href=https://emsesp.org/tips-and-tricks/ rel=canonical><link rel=icon href=../_media/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-8.2.11"><title>Tips & Tricks - EMS-ESP</title><link rel=stylesheet href=../assets/stylesheets/main.8c5ef100.min.css><link rel=stylesheet href=../assets/stylesheets/palette.9647289d.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Barlow:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Barlow";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../assets/css/anchor-fix.css><link rel=stylesheet href=../assets/css/github.css><script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-SVDSJ3QTVC"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&gtag("event","search",{search_term:this.value})}),"undefined"!=typeof location$&&location$.subscribe(function(e){gtag("config","G-SVDSJ3QTVC",{page_path:e.pathname})})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-SVDSJ3QTVC"></script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=blue-grey data-md-color-accent=light-blue> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#control-the-boiler-heating class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=EMS-ESP class="md-header__button md-logo" aria-label=EMS-ESP data-md-component=logo> <img src=../_media/logo/boiler.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> EMS-ESP </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Tips & Tricks </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=blue-grey data-md-color-accent=light-blue aria-hidden=true type=radio name=__palette id=__palette_1> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/emsesp/EMS-ESP32 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> emsesp/EMS-ESP32 </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../All-Devices/ class=md-tabs__link> Supported Devices </a> </li> <li class=md-tabs__item> <a href=../Integrations/ class=md-tabs__link> Integrations </a> </li> <li class=md-tabs__item> <a href=../Support/ class="md-tabs__link md-tabs__link--active"> Help </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=EMS-ESP class="md-nav__button md-logo" aria-label=EMS-ESP data-md-component=logo> <img src=../_media/logo/boiler.svg alt=logo> </a> EMS-ESP </label> <div class=md-nav__source> <a href=https://github.com/emsesp/EMS-ESP32 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> emsesp/EMS-ESP32 </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1> Home <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Home data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> News </a> </li> <li class=md-nav__item> <a href=../About/ class=md-nav__link> About EMS-ESP </a> </li> <li class=md-nav__item> <a href=../Version-Release-History/ class=md-nav__link> Version Release History </a> </li> <li class=md-nav__item> <a href=../Getting-Started/ class=md-nav__link> Getting Started </a> </li> <li class=md-nav__item> <a href=../Configuring/ class=md-nav__link> Configuring </a> </li> <li class=md-nav__item> <a href=../Special-Functions/ class=md-nav__link> Special Functions </a> </li> <li class=md-nav__item> <a href=../WebUI/ class=md-nav__link> WebUI </a> </li> <li class=md-nav__item> <a href=../MQTT/ class=md-nav__link> MQTT </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_9 type=checkbox id=__nav_1_9> <label class=md-nav__link for=__nav_1_9> Modbus/TCP <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Modbus/TCP data-md-level=2> <label class=md-nav__title for=__nav_1_9> <span class="md-nav__icon md-icon"></span> Modbus/TCP </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Modbus/ class=md-nav__link> Modbus </a> </li> <li class=md-nav__item> <a href=../Modbus-Settings/ class=md-nav__link> Settings </a> </li> <li class=md-nav__item> <a href=../Modbus-Server-IDs/ class=md-nav__link> Server Unit Identifiers </a> </li> <li class=md-nav__item> <a href=../Modbus-System-Server/ class=md-nav__link> The SYSTEM Server </a> </li> <li class=md-nav__item> <a href=../Modbus-Register-Blocks/ class=md-nav__link> Register Block Offsets </a> </li> <li class=md-nav__item> <a href=../Modbus-Entity-Registers/ class=md-nav__link> Entity Register Offsets </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Commands/ class=md-nav__link> Commands </a> </li> <li class=md-nav__item> <a href=../Console/ class=md-nav__link> Console </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_12 type=checkbox id=__nav_1_12> <label class=md-nav__link for=__nav_1_12> Supported Devices <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Supported Devices" data-md-level=2> <label class=md-nav__title for=__nav_1_12> <span class="md-nav__icon md-icon"></span> Supported Devices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../All-Devices/ class=md-nav__link> All Devices and Entities </a> </li> <li class=md-nav__item> <a href=../Boilers/ class=md-nav__link> Boilers </a> </li> <li class=md-nav__item> <a href=../Thermostats/ class=md-nav__link> Thermostats </a> </li> <li class=md-nav__item> <a href=../Solar-Modules/ class=md-nav__link> Solar Modules </a> </li> <li class=md-nav__item> <a href=../Mixer-Modules/ class=md-nav__link> Mixer Modules </a> </li> <li class=md-nav__item> <a href=../Heat-Pumps/ class=md-nav__link> Heat Pumps </a> </li> <li class=md-nav__item> <a href=../Controllers/ class=md-nav__link> Controllers </a> </li> <li class=md-nav__item> <a href=../Switches/ class=md-nav__link> Switches </a> </li> <li class=md-nav__item> <a href=../Other-Devices/ class=md-nav__link> Other Devices </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_13 type=checkbox id=__nav_1_13> <label class=md-nav__link for=__nav_1_13> Integrations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Integrations data-md-level=2> <label class=md-nav__title for=__nav_1_13> <span class="md-nav__icon md-icon"></span> Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Integrations/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../Home-Assistant/ class=md-nav__link> Home Assistant </a> </li> <li class=md-nav__item> <a href=../IOBroker/ class=md-nav__link> IOBroker </a> </li> <li class=md-nav__item> <a href=../Domoticz/ class=md-nav__link> Domoticz </a> </li> <li class=md-nav__item> <a href=../openHAB/ class=md-nav__link> openHAB </a> </li> <li class=md-nav__item> <a href=../Loxone/ class=md-nav__link> Loxone </a> </li> <li class=md-nav__item> <a href=../Grafana/ class=md-nav__link> Grafana </a> </li> <li class=md-nav__item> <a href=../Modbus/ class=md-nav__link> Modbus </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_14 type=checkbox id=__nav_1_14> <label class=md-nav__link for=__nav_1_14> Help <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Help data-md-level=2> <label class=md-nav__title for=__nav_1_14> <span class="md-nav__icon md-icon"></span> Help </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Support/ class=md-nav__link> Support </a> </li> <li class=md-nav__item> <a href=../Troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../FAQ/ class=md-nav__link> FAQ </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Tips & Tricks <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Tips & Tricks </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#control-the-boiler-heating class=md-nav__link> Control the boiler heating </a> </li> <li class=md-nav__item> <a href=#retrieve-data-via-rest-using-php class=md-nav__link> Retrieve data via REST using PHP </a> </li> <li class=md-nav__item> <a href=#adjusting-the-flow-temperature-based-on-whether-ch-or-dhw-is-being-heated class=md-nav__link> Adjusting the flow temperature based on whether CH or DHW is being heated </a> </li> <li class=md-nav__item> <a href=#home-assistant-sensor-template-for-all-status-numbers-on-a-gb192-boiler class=md-nav__link> Home Assistant sensor template for all status numbers on a GB192 Boiler </a> </li> <li class=md-nav__item> <a href=#using-a-custom-climate-component-in-home-assistant class=md-nav__link> Using a custom Climate component in Home Assistant </a> </li> <li class=md-nav__item> <a href=#automating-the-onoff-of-the-heat-pump-in-home-assistant class=md-nav__link> Automating the on/off of the heat pump in Home Assistant </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_15 type=checkbox id=__nav_1_15> <label class=md-nav__link for=__nav_1_15> For Developers <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="For Developers" data-md-level=2> <label class=md-nav__title for=__nav_1_15> <span class="md-nav__icon md-icon"></span> For Developers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Building/ class=md-nav__link> Building & Testing the Firmware </a> </li> <li class=md-nav__item> <a href=../Adding-Languages/ class=md-nav__link> Adding Languages </a> </li> <li class=md-nav__item> <a href=../Contributing/ class=md-nav__link> Contributing </a> </li> <li class=md-nav__item> <a href=../EMS-bus/ class=md-nav__link> The EMS protocol </a> </li> <li class=md-nav__item> <a href=../Modbus-Dev/ class=md-nav__link> Maintaining Modbus Parameters </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Supported Devices <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Supported Devices" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Supported Devices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../All-Devices/ class=md-nav__link> All Devices and Entities </a> </li> <li class=md-nav__item> <a href=../Boilers/ class=md-nav__link> Boilers </a> </li> <li class=md-nav__item> <a href=../Thermostats/ class=md-nav__link> Thermostats </a> </li> <li class=md-nav__item> <a href=../Solar-Modules/ class=md-nav__link> Solar Modules </a> </li> <li class=md-nav__item> <a href=../Mixer-Modules/ class=md-nav__link> Mixer Modules </a> </li> <li class=md-nav__item> <a href=../Heat-Pumps/ class=md-nav__link> Heat Pumps </a> </li> <li class=md-nav__item> <a href=../Controllers/ class=md-nav__link> Controllers </a> </li> <li class=md-nav__item> <a href=../Switches/ class=md-nav__link> Switches </a> </li> <li class=md-nav__item> <a href=../Other-Devices/ class=md-nav__link> Other Devices </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Integrations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Integrations data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Integrations/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../Home-Assistant/ class=md-nav__link> Home Assistant </a> </li> <li class=md-nav__item> <a href=../IOBroker/ class=md-nav__link> IOBroker </a> </li> <li class=md-nav__item> <a href=../Domoticz/ class=md-nav__link> Domoticz </a> </li> <li class=md-nav__item> <a href=../openHAB/ class=md-nav__link> openHAB </a> </li> <li class=md-nav__item> <a href=../Loxone/ class=md-nav__link> Loxone </a> </li> <li class=md-nav__item> <a href=../Grafana/ class=md-nav__link> Grafana </a> </li> <li class=md-nav__item> <a href=../Modbus/ class=md-nav__link> Modbus </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Help <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Help data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Help </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Support/ class=md-nav__link> Support </a> </li> <li class=md-nav__item> <a href=../Troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../FAQ/ class=md-nav__link> FAQ </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Tips & Tricks <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Tips & Tricks </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#control-the-boiler-heating class=md-nav__link> Control the boiler heating </a> </li> <li class=md-nav__item> <a href=#retrieve-data-via-rest-using-php class=md-nav__link> Retrieve data via REST using PHP </a> </li> <li class=md-nav__item> <a href=#adjusting-the-flow-temperature-based-on-whether-ch-or-dhw-is-being-heated class=md-nav__link> Adjusting the flow temperature based on whether CH or DHW is being heated </a> </li> <li class=md-nav__item> <a href=#home-assistant-sensor-template-for-all-status-numbers-on-a-gb192-boiler class=md-nav__link> Home Assistant sensor template for all status numbers on a GB192 Boiler </a> </li> <li class=md-nav__item> <a href=#using-a-custom-climate-component-in-home-assistant class=md-nav__link> Using a custom Climate component in Home Assistant </a> </li> <li class=md-nav__item> <a href=#automating-the-onoff-of-the-heat-pump-in-home-assistant class=md-nav__link> Automating the on/off of the heat pump in Home Assistant </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Contact/ class=md-nav__link> Contact </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#control-the-boiler-heating class=md-nav__link> Control the boiler heating </a> </li> <li class=md-nav__item> <a href=#retrieve-data-via-rest-using-php class=md-nav__link> Retrieve data via REST using PHP </a> </li> <li class=md-nav__item> <a href=#adjusting-the-flow-temperature-based-on-whether-ch-or-dhw-is-being-heated class=md-nav__link> Adjusting the flow temperature based on whether CH or DHW is being heated </a> </li> <li class=md-nav__item> <a href=#home-assistant-sensor-template-for-all-status-numbers-on-a-gb192-boiler class=md-nav__link> Home Assistant sensor template for all status numbers on a GB192 Boiler </a> </li> <li class=md-nav__item> <a href=#using-a-custom-climate-component-in-home-assistant class=md-nav__link> Using a custom Climate component in Home Assistant </a> </li> <li class=md-nav__item> <a href=#automating-the-onoff-of-the-heat-pump-in-home-assistant class=md-nav__link> Automating the on/off of the heat pump in Home Assistant </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/emsesp/docs/blob/master/docs/tips-and-tricks.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1>Tips & Tricks</h1> <p><strong>Below are a collection of useful tips, tricks and code submitted by the community:</strong></p> <h2 id=control-the-boiler-heating>Control the boiler heating<a class=headerlink href=#control-the-boiler-heating title="Permanent link">~</a></h2> <p><em>(by @Oderik)</em></p> <p>In a very simple setup a boiler provides heat to one heating circuit. If <code>heating activated</code> is <code>on</code>, the boiler maintains the <code>selected flow temperature</code> by regulating the burner and the heat pump.</p> <p>Once the <code>current flow temperature</code> exceeds the <code>selected flow temperature</code> + <code>temperature hysteresis off</code>, the heating will stop until the <code>current flow temperature</code> drops below the <code>selected flow temperature</code> + <code>temperature hysteresis on</code> (which is typically a negative value).</p> <p>Thus to activate the heating you will need to set <code>heatingactivated</code> to <code>on</code> and set an appropriate <code>flowtemp</code>. The latter should be derived from the <code>heating temperature setting</code> which can be set using the physical dial/control on the boiler. It should be considered as the maximum flow temperature. You can also use a lower flow temperature to maintain a constant room temperature once the initial heating is done.</p> <p>Additional info from Michael:</p> <p>You can set the flowtemp with EMS-ESP directly on the boiler without using a Thermostat. Many users do this. Some pointers:</p> <ul> <li>the flowtemp value on the control panel has to be set higher as the temperature sent over the EMS bus is only accepted if it has a lower value</li> <li>you have to send a value at least every minute to maintain the flowtemp, otherwise the boiler will automatically fall back to the higher setpoint from the control panel.</li> <li>There is a special EMS-ESP entity called <code>forceheatingoff</code> that sets the flowtemp value to 0 every minute automatically to the boiler. Other users prefer like to use an on/off control instead.</li> </ul> <h2 id=retrieve-data-via-rest-using-php>Retrieve data via REST using PHP<a class=headerlink href=#retrieve-data-via-rest-using-php title="Permanent link">~</a></h2> <p><em>(by @flohse123)</em></p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=cp>&lt;?php</span>
<span class=nv>$ch</span> <span class=o>=</span> <span class=nb>curl_init</span><span class=p>(</span><span class=s2>&quot;http://&lt;myIP&gt;/api?device=thermostat&amp;cmd=info&quot;</span><span class=p>);</span>
<span class=nb>curl_exec</span><span class=p>(</span><span class=nv>$ch</span><span class=p>);</span>
<span class=nb>curl_close</span><span class=p>(</span><span class=nv>$ch</span><span class=p>);</span>
<span class=cp>?&gt;</span><span class=x></span>
</code></pre></div> </td></tr></table> <h2 id=adjusting-the-flow-temperature-based-on-whether-ch-or-dhw-is-being-heated>Adjusting the flow temperature based on whether CH or DHW is being heated<a class=headerlink href=#adjusting-the-flow-temperature-based-on-whether-ch-or-dhw-is-being-heated title="Permanent link">~</a></h2> <p><em>(by @IanC)</em></p> <!-- prettier-ignore --> <div class="admonition quote"> <p class=admonition-title>From the Discord post IanC said:</p> <p>"With a ~2012 Worcester Bosch boiler, house heating is managed by an EvoHome system that knows which parts of house need how much heat, but it can only use an on/off relay to control the boiler for space and water heating. This means it cannot directly control flow temperature, and historically this has been set at continuous 65C via dial on front of boiler to allow water heating when needed. Very pleased to have added EMS-ESP to my system to help manage flow temperatures. I wrote a simple C program to run on my OpenWrt internet router which eavesdrops on EvoHome messages to capture useful information on what amount of heat is needed for space and water into simple txt files in /tmp. I then schedule a shell script every 4 minutes which uses a few steps to select a flow temperature: start with a weather compensated value based on exterior temperature from online service; adjust this up or down by up to 25% based on EvoHome space heat demand; if necessary override this to heat hot water. The selected flow temperature and a max burner level are then sent via curl to a @BBQKees device running EMS-ESP which in turn controls boiler. So far it seems to be working as intended without loss of house comfort but with much lower flow temperatures observed to try and encourage boiler operating in condensing zone. Very hard to tell if it is affecting gas consumption - which I would like it to :). Main challenge I still see is how to stop EvoHome causing frequent on/off cycles of boiler while it still tries to use TPI flow control management."</p> </div> <p><img alt=1.5.0 src=../_media/examples/ian_setflowtemp.png></p> <p>The temperature compensation algorithms are in the shell script:</p> <table class=highlighttable><tr><th colspan=2 class=filename><div class=highlight><span class=filename>set_flowtemp.sh</span></div></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span>
<span class=normal>91</span>
<span class=normal>92</span>
<span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span>
<span class=normal>96</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=ch>#!/bin/sh -x</span>
<span class=nv>MINFLOW</span><span class=o>=</span><span class=m>30</span>.0
<span class=nv>MAXFLOW</span><span class=o>=</span><span class=m>70</span>.0

<span class=k>function</span> set_flowtemp<span class=o>()</span> <span class=o>{</span>
<span class=nb>local</span> <span class=nv>boiler_key</span><span class=o>=</span><span class=k>$(</span>cat /tmp/boiler-key.txt<span class=k>)</span>
curl --silent http://192.168.0.140/api/boiler/selflowtemp <span class=se>\</span>
  -H <span class=s2>&quot;Content-Type: application/json&quot;</span> -d <span class=s2>&quot;{ &quot;</span>value<span class=s2>&quot; : </span><span class=nv>$1</span><span class=s2> }&quot;</span> <span class=se>\</span>
  -H <span class=s2>&quot;Authorization: Bearer </span><span class=nv>$boiler_key</span><span class=s2>&quot;</span>

<span class=nb>local</span> <span class=nv>burner_power</span><span class=o>=</span><span class=k>$(</span><span class=nb>echo</span> <span class=nv>$1</span> <span class=p>|</span> awk <span class=s1>&#39;{ \</span>
<span class=s1>if ($1 &lt; 40.0) bp = 35;\</span>
<span class=s1>else if ($1 &lt; 50.0) bp = 50;\</span>
<span class=s1>else if ($1 &lt; 60.0) bp = 65;\</span>
<span class=s1>else bp = 90.0; \</span>
<span class=s1>printf &quot;%2.1f&quot;, bp}&#39;</span><span class=k>)</span>

curl --silent http://192.168.0.140/api/boiler/selburnpow <span class=se>\</span>
  -H <span class=s2>&quot;Content-Type: application/json&quot;</span> -d <span class=s2>&quot;{ &quot;</span>value<span class=s2>&quot; : </span><span class=nv>$burner_power</span><span class=s2> }&quot;</span> <span class=se>\</span>
  -H <span class=s2>&quot;Authorization: Bearer </span><span class=nv>$boiler_key</span><span class=s2>&quot;</span>
<span class=o>}</span>

<span class=k>function</span> dhw_active<span class=o>(){</span>
  <span class=nb>local</span> <span class=nv>active</span><span class=o>=</span><span class=s2>&quot;false&quot;</span>
  <span class=k>if</span> <span class=o>[[</span> -f /tmp/relay_dhw <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
    <span class=nv>active</span><span class=o>=</span><span class=k>$(</span>cat /tmp/relay_dhw <span class=p>|</span> awk <span class=s1>&#39;{if ($1 == 0.0) print &quot;false&quot;; else print &quot;true&quot;;}&#39;</span><span class=k>)</span>
  <span class=k>else</span>
    <span class=nb>local</span> <span class=nv>curr_hour</span><span class=o>=</span><span class=k>$(</span>date +%H<span class=k>)</span>
    <span class=k>if</span> <span class=o>[[</span> <span class=nv>$curr_hour</span> -eq <span class=m>6</span> <span class=o>]]</span> <span class=o>||</span> <span class=o>[[</span> <span class=nv>$curr_hour</span> -eq <span class=m>16</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
      <span class=nv>active</span><span class=o>=</span><span class=s2>&quot;true&quot;</span>
    <span class=k>fi</span>
  <span class=k>fi</span>

  <span class=nb>echo</span> <span class=nv>$active</span>
<span class=o>}</span>

<span class=k>function</span> dhw_flowtemp<span class=o>(){</span>
  <span class=k>if</span> <span class=o>[[</span> -f  /tmp/temp_dhw <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
    <span class=nb>echo</span> <span class=k>$(</span>cat /tmp/temp_dhw <span class=p>|</span> awk <span class=s1>&#39;{printf &quot;%2.1f&quot;, $1 + 20.0}&#39;</span><span class=k>)</span>
  <span class=k>else</span>
    <span class=nb>echo</span> <span class=nv>$MAXFLOW</span>
  <span class=k>fi</span>
<span class=o>}</span>

<span class=k>function</span> outside_temp<span class=o>(){</span>
  <span class=k>if</span> <span class=o>[[</span> -f  /tmp/meteo.<span class=k>$(</span>date +%Y%m%d<span class=k>)</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
    <span class=nb>echo</span> <span class=k>$(</span>cat /tmp/meteo.<span class=k>$(</span>date +%Y%m%d<span class=k>)</span><span class=p>|</span>jq .hourly.temperature_2m<span class=o>[</span><span class=k>$(</span>date +%H<span class=k>)</span><span class=o>]</span><span class=k>)</span>
  <span class=k>else</span>
    <span class=nb>echo</span> UNKNOWN
  <span class=k>fi</span>
<span class=o>}</span>

<span class=k>function</span> weather_flowtemp<span class=o>(){</span>
  <span class=nb>local</span> <span class=nv>otemp</span><span class=o>=</span><span class=k>$(</span>outside_temp<span class=k>)</span>
  <span class=k>if</span> <span class=o>[[</span> <span class=nv>$otemp</span> <span class=o>=</span> <span class=s2>&quot;UNKNOWN&quot;</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
    <span class=c1># Default flow temperature if no outside temperature available</span>
    <span class=nb>echo</span> <span class=m>65</span>.0
  <span class=k>else</span>
    <span class=c1># Calculated flow temperature if outside temperature available</span>
    <span class=c1># echo $(echo $otemp | awk &#39;{printf &quot;%2.1f&quot;, 70.0 - ($1 + 5) * 1.5}&#39;)</span>
    <span class=nb>echo</span> <span class=k>$(</span><span class=nb>echo</span> <span class=nv>$otemp</span> <span class=nv>$MINFLOW</span> <span class=nv>$MAXFLOW</span> <span class=p>|</span> awk <span class=s1>&#39;{printf &quot;%2.1f&quot;, $2 + ($3 - $2) / 25.0 * (20.0 - $1)}&#39;</span><span class=k>)</span>
  <span class=k>fi</span>
<span class=o>}</span>

<span class=k>function</span> load_flowtemp<span class=o>(){</span>
  <span class=k>if</span> <span class=o>[[</span> -f  /tmp/relay_ch <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
    <span class=nb>echo</span> <span class=k>$(</span>cat /tmp/relay_ch <span class=p>|</span> awk <span class=s1>&#39;{printf &quot;%2.1f&quot;, 20.0 + ($1 * 0.50)}&#39;</span><span class=k>)</span>
  <span class=k>else</span>
    <span class=nb>echo</span> <span class=k>$(</span>weather_flowtemp<span class=k>)</span>
  <span class=k>fi</span>
<span class=o>}</span>
<span class=k>function</span> load_factor<span class=o>(){</span>
  <span class=k>if</span> <span class=o>[[</span> -f  /tmp/relay_ch <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
    <span class=nb>local</span> <span class=nv>relay_demand</span><span class=o>=</span><span class=k>$(</span>cat /tmp/relay_ch<span class=k>)</span>
    <span class=nb>echo</span> <span class=k>$(</span><span class=nb>echo</span> <span class=nv>$1</span> <span class=nv>$relay_demand</span> <span class=nv>$MINFLOW</span> <span class=p>|</span> awk <span class=s1>&#39;{printf &quot;%2.1f&quot;, $3 + ($1 - $3) * (0.75 + $2 / 200.0)}&#39;</span><span class=k>)</span>
  <span class=k>else</span>
    <span class=nb>echo</span> <span class=nv>$1</span>
  <span class=k>fi</span>
<span class=o>}</span>

<span class=k>function</span> max<span class=o>(){</span>
  <span class=nb>echo</span> <span class=k>$(</span><span class=nb>echo</span> <span class=nv>$1</span> <span class=nv>$2</span> <span class=p>|</span> awk <span class=s1>&#39;{if ($2 &gt; $1) printf &quot;%2.1f&quot;, $2; else printf &quot;%2.1f&quot;, $1;}&#39;</span><span class=k>)</span>
<span class=o>}</span>

<span class=k>function</span> min<span class=o>(){</span>
  <span class=nb>echo</span> <span class=k>$(</span><span class=nb>echo</span> <span class=nv>$1</span> <span class=nv>$2</span> <span class=p>|</span> awk <span class=s1>&#39;{if ($2 &lt; $1) printf &quot;%2.1f&quot;, $2; else printf &quot;%2.1f&quot;, $1;}&#39;</span><span class=k>)</span>
<span class=o>}</span>

<span class=nv>flowtemp</span><span class=o>=</span><span class=k>$(</span>weather_flowtemp<span class=k>)</span>
<span class=nv>flowtemp</span><span class=o>=</span><span class=k>$(</span>load_factor <span class=nv>$flowtemp</span><span class=k>)</span>
<span class=k>if</span> <span class=o>[</span> <span class=k>$(</span>dhw_active<span class=k>)</span> <span class=o>=</span> <span class=s2>&quot;true&quot;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
  <span class=nv>alt_flowtemp</span><span class=o>=</span><span class=k>$(</span>dhw_flowtemp<span class=k>)</span>
  <span class=nv>flowtemp</span><span class=o>=</span><span class=k>$(</span>max <span class=nv>$flowtemp</span> <span class=nv>$alt_flowtemp</span><span class=k>)</span>
<span class=k>fi</span>
<span class=nv>flowtemp</span><span class=o>=</span><span class=k>$(</span>min <span class=nv>$flowtemp</span> <span class=nv>$MAXFLOW</span><span class=k>)</span>
set_flowtemp <span class=nv>$flowtemp</span>
</code></pre></div> </td></tr></table> <h2 id=home-assistant-sensor-template-for-all-status-numbers-on-a-gb192-boiler>Home Assistant sensor template for all status numbers on a GB192 Boiler<a class=headerlink href=#home-assistant-sensor-template-for-all-status-numbers-on-a-gb192-boiler title="Permanent link">~</a></h2> <p>(by @tefracky from <a href=https://github.com/emsesp/EMS-ESP32/issues/938#issuecomment-1417592878>https://github.com/emsesp/EMS-ESP32/issues/938#issuecomment-1417592878</a>)</p> <p>Here is the sensor in the new Home-Assistant template format for all status numbers for the Buderus GB192i-19 in German:</p> <table class=highlighttable><tr><th colspan=2 class=filename><div class=highlight><span class=filename>Service code number text for Buderus GB192i-19</span></div></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>  1</span>
<span class=normal>  2</span>
<span class=normal>  3</span>
<span class=normal>  4</span>
<span class=normal>  5</span>
<span class=normal>  6</span>
<span class=normal>  7</span>
<span class=normal>  8</span>
<span class=normal>  9</span>
<span class=normal> 10</span>
<span class=normal> 11</span>
<span class=normal> 12</span>
<span class=normal> 13</span>
<span class=normal> 14</span>
<span class=normal> 15</span>
<span class=normal> 16</span>
<span class=normal> 17</span>
<span class=normal> 18</span>
<span class=normal> 19</span>
<span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&#39;Heizungsstatus&#39;</span><span class=w></span>
<span class=w>  </span><span class=nt>attributes</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>service-code</span><span class=p>:</span><span class=w> </span><span class=s>&quot;{{states(&#39;sensor.heizung_ems_esp_boiler_statusmeldungsnummer&#39;)|int(0)}}&quot;</span><span class=w></span>
<span class=w>    </span><span class=nt>timestamp</span><span class=p>:</span><span class=w> </span><span class=s>&quot;{{now().strftime(&#39;%Y-%m-%d</span><span class=nv> </span><span class=s>%H:%M:%S&#39;)}}&quot;</span><span class=w></span>
<span class=w>    </span><span class=nt>date</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>{{ now().timestamp() | timestamp_custom(&quot;%Y-%m-%d&quot;, true) }}</span><span class=w></span>
<span class=w>    </span><span class=nt>time</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>{{ now().timestamp() | timestamp_custom(&quot;%H:%M:%S&quot;, true) }}</span><span class=w></span>
<span class=w>  </span><span class=nt>state</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;-</span><span class=w></span>
<span class=w>    </span><span class=no>{% set mapper = {</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;200&#39; : &#39;200 - Das Gerät befindet sich im Heizbetrieb.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;201&#39; : &#39;201 - Das Gerät befindet sich im Warmwasserbetrieb.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;202&#39; : &#39;202 - Wartephase des Geräts. Wärmeanforderung durch RC-Regelgerät oder einen ON/OFF-Thermostat erfolgt in Intervallen von weniger als 10 Minuten.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;203&#39; : &#39;203 - Betriebsbereitschaft: keine Wärmeanforderung vorhanden&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;204&#39; : &#39;204 - Wartephase des Geräts. Die gemessene Vorlauf- temperatur ist höher als die berechnete oder eingestellte Heizwassertemperatur. - Eingestellte Heizwassertemperatur am Gerät prüfen. Heizwassertemperatur ggf. erhöhen. Bei einer außentemperaturgeführten Regelung die eingestellte Heizkurve am Raumthermostat prüfen. Heizkurve ggf. ändern. Verkabelung und Funktion des Speichertemperaturfühlers prüfen. Bauteil ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;207&#39; : &#39;207 - Der Betriebsdruck ist zu niedrig (weniger als 0,2 bar). - Heizungsanlage bis zu 2 bar füllen. Ausdehnungsgefäß prüfen. Heizungsanlage auf undichte Stellen prüfen. Verkabelung und Funktion des Druckfühlers prüfen. Bauteil ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;208&#39; : &#39;208 - Das Gerät befindet sich im Schornsteinfegerbe-trieb oder Servicebetrieb.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;210&#39; : &#39;210 - Vom Abgastemperaturfühler gemessene Tem- peratur ist zu hoch und ist dadurch geöffnet. - Funktion des Abgastemperaturfühlers prüfen. Bauteil ggf. austauschen. Gerät auf Verschmutzung prüfen. Gerät ggf. warten.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;212&#39; : &#39;212 - Der Vorlauf- oder Sicherheitstemperaturfühler misst einen zu schnellen Temperaturanstieg. - Betriebsdruck prüfen. Heizungsanlage und Gerät entlüften. Heizungsanlage auf ausreichenden Wasserdurchfluss prüfen. Verkabelung und Funktion der Pumpe und des jeweiligen Temperaturfühlers prüfen. Bauteil ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;213&#39; : &#39;213 - Der Vorlauf- oder Rücklauftemperaturfühler misst einen zu schnellen Temperaturanstieg. - Betriebsdruck prüfen. Heizungsanlage und Gerät entlüften. Heizungsanlage auf ausreichenden Wasserdurchfluss prüfen. Wärmeleistung nach der Größe der Heizungsanlage einstellen. Verkabelung zur Pumpe oder zum jeweiligen Temperaturfühler prüfen. Bauteil ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;214&#39; : &#39;214 - Das Gebläse wird während der Sicherheitszeit abgeschaltet. - Verkabelung und Steckverbindungen des Gebläses prüfen. Betriebsverhalten des Geräts durch Austauschen des Gebläses prüfen. Steckverbindungen des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;215&#39; : &#39;215 - Das Gebläse läuft zu schnell. - Abgasanlage prüfen, ggf. reinigen oder instandsetzen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;216&#39; : &#39;216 - Das Gebläse läuft zu langsam. - Gebläsekabel mit Stecker prüfen, ggf. austauschen. Gebläse auf Verschmutzung und Blockierung prüfen, ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;217&#39; : &#39;217 - Das Gebläse läuft unregelmäßig während der Hochfahrphase. - Verkabelung und Steckverbindungen des Gebläses prüfen. Betriebsverhalten des Geräts durch Austauschen des Gebläses prüfen. Steckverbindungen des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;218&#39; : &#39;218 - Die vom Vorlauftemperaturfühler gemessene Temperatur ist höher als 105 °C. - Betriebsdruck prüfen. Heizungsanlage und Gerät entlüften. Heizungsanlage auf ausreichenden Wasserdurchfluss prüfen. Funktion der Pumpe und des Vorlauftemperaturfühlers prüfen. Bauteil ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;219&#39; : &#39;219 - Der Sicherheitstemperaturfühler misst eine Temperatur über 105 °C. - Betriebsdruck prüfen. Heizungsanlage und Gerät entlüften. Heizungsanlage auf ausreichenden Wasserdurchfluss prüfen. Funktion der Pumpe und des Sicherheitstemperaturfühlers prüfen. Bauteil ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;220&#39; : &#39;220 - Kurzschluss des Sicherheitstemperaturfühlers oder gemessene Wassertemperatur ist höher als 130 °C.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;221&#39; : &#39;221 - Die Kontakte des Sicherheitstemperaturfühlers sind unterbrochen. - Stecker des Sicherheitstemperaturfühlers prüfen. Sicherheitstemperaturfühler austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;222&#39; : &#39;222 - Die Kontakte des Vorlauftemperaturfühlers sind kurzgeschlossen. - Stecker des Vorlauftemperaturfühlers prüfen. Vorlauftemperaturfühler austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;224&#39; : &#39;224 - Wärmeblock-Temperaturbegrenzer oder Abgas- temperaturbegrenzer hat ausgelöst. - Wenn die blockierende Störung längere Zeit bestehen bleibt, wird aus der blockie- renden Störung eine verriegelnde Störung. Wärmeblock-Temperaturbegrenzer und Anschlusskabel auf Unterbrechung prü- fen, ggf. austauschen. Bei Störung des Abgastemperaturbegrenzers erscheint eine Meldung max. nach 2 Stunden. Abgastemperaturbegrenzer und Anschlusskabel auf Unterbrechung prüfen, ggf. austauschen. Betriebsdruck der Heizungsanlage prüfen. Im Servicemenü unter EINSTELLUNGEN &gt; SONDERFKT. &gt; ENTLÜFTUNGSFKT. die Entlüftung einschalten und das Gerät entlüften. Pumpenleistung oder Pumpenkennfeld korrekt einstellen und auf maximale Leis- tung anpassen. Im Menü Service unter FUNKTIONSTEST &gt; TESTS AKTIVIEREN &gt; PUMPE die Hei- zungspumpe auf Dauerbetrieb einstellen. Heizungspumpe andrehen, ggf. austauschen. Wärmeblock wasserseitig prüfen, ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;227&#39; : &#39;227 - Unzureichende Flammenbildung (Ionisations- strom) während des Zündungsversuchs des Brenners. - Gerät auf Verschmutzung prüfen. Dynamischen Gasvordruck prüfen. Gas-Luft-Verhältnis prüfen. Steckverbindungen der Zündeinrichtung prüfen. Zündung und Ionisationsstrom prüfen. Zündeinrichtung auf Beschädigung prüfen. Bauteil ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;228&#39; : &#39;228 - Flammenbildung (Ionisationsstrom) vor Bren- nerstart. - Steckverbindung der Überwachungselektrode prüfen. Zündeinrichtung auf Beschädigung und Verschleiß prüfen. Bauteil ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;229&#39; : &#39;229 - Unzureichende Flammenbildung (Ionisations- strom) während des Brennerbetriebs. - Dynamischen Gasvordruck prüfen. Verkabelung und Steckverbindung der Überwachungselektrode prüfen. Zündeinrichtung auf Beschädigung und Verschleiß prüfen. Bauteil ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;231&#39; : &#39;231 - Unterbrechung der Netzspannung während einer verriegelnden Störung. - Gerät erneut starten (Reset).&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;232&#39; : &#39;232 - Der externe Schaltkontakt ist geöffnet. - Brücke am Anschluss des externen Schaltkontaktes prüfen. Externen Schaltkontakt prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;233&#39; : &#39;233 - Kodierstecker nicht erkannt. - Kodierstecker richtig aufstecken, ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;234&#39; : &#39;234 - Die Kontakte der Gasarmatur sind unterbro- chen. - Verkabelung und Steckverbindung der Gasarmatur prüfen. Gasarmatur austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;235&#39; : &#39;235 - Falscher Kodierstecker (HCM-Modul). - Kodierstecker (HCM-Modul) prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;237&#39; : &#39;237 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;238&#39; : &#39;238 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;239&#39; : &#39;239 - Brennerautomat oder HCM-Modul ist defekt. - Kodierstecker austauschen. Steuergerät austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;240&#39; : &#39;240 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;241&#39; : &#39;241 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;242&#39; : &#39;242 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;243&#39; : &#39;243 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;244&#39; : &#39;244 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;245&#39; : &#39;245 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;246&#39; : &#39;246 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;247&#39; : &#39;247 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;248&#39; : &#39;248 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;249&#39; : &#39;249 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;250&#39; : &#39;250 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;251&#39; : &#39;251 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;252&#39; : &#39;252 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;253&#39; : &#39;253 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;254&#39; : &#39;254 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;255&#39; : &#39;255 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;256&#39; : &#39;256 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;257&#39; : &#39;257 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;258&#39; : &#39;258 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;259&#39; : &#39;259 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;260&#39; : &#39;260 - Der Vorlauftemperaturfühler misst keinen Tem- peraturanstieg nach einem Brennerstart. - Betriebsdruck prüfen. Heizungsanlage und Gerät entlüften. Heizungsanlage auf ausreichenden Wasserdurchfluss prüfen. Verkabelung und Funktion der Pumpe und des Vorlauftemperaturfühlers prüfen. Bauteil ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;261&#39; : &#39;261 - Brennerautomat ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;262&#39; : &#39;262 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;263&#39; : &#39;263 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;264&#39; : &#39;264 - Gebläse ausgefallen. - Verkabelung und Steckverbindungen des Gebläses prüfen. Gebläse auf Verschmutzung und Blockierung prüfen, ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;265&#39; : &#39;265 - Ein-/Aus-Betrieb: Der Wärmebedarf ist geringer als die minimale Wärmeleistung.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;268&#39; : &#39;268 - Komponententest: Das Gerät befindet sich im Testmodus.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;269&#39; : &#39;269 - Zündeinrichtung wurde zu lange aktiviert. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;270&#39; : &#39;270 - Das Gerät wird hochgefahren.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;272&#39; : &#39;272 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;273&#39; : &#39;273 - Der Brenner und das Gebläse waren 24 Std. un- unterbrochen in Betrieb und werden zur Sicher- heitskontrolle für kurze Zeit außer Betrieb genommen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;275&#39; : &#39;275 - Wärmepumpe im Enteisungsmodus.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;276&#39; : &#39;276 - Die Temperatur am Vorlauftemperaturfühler ist &gt; 95 °C. - Diese Störungsanzeige kann auftreten, ohne dass eine Störung vorliegt, wenn plötz- lich alle Heizkörperventile geschlossen werden. Betriebsdruck der Heizungsanlage prüfen. Wartungshähne öffnen. Im Servicemenü unter FUNKTIONSTEST &gt; TESTS AKTIVIEREN &gt; PUMPE die Hei- zungspumpe auf Dauerbetrieb einstellen. Anschlusskabel zur Heizungspumpe prüfen. Heizungspumpe andrehen, ggf. austauschen. Pumpenleistung oder Pumpenkennfeld korrekt einstellen und auf maximale Leistung anpassen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;280&#39; : &#39;280 - Brennerautomat ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;281&#39; : &#39;281 - Die Heizungspumpe erzeugt keinen Druck. - Betriebsdruck der Heizungsanlage prüfen. Wartungshähne öffnen. Heizungspumpe andrehen, ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;282&#39; : &#39;282 - Keine Drehzahlrückmeldung der Heizungspumpe. - Verkabelung und Funktion der Heizungspumpe prüfen. Bauteil ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;283&#39; : &#39;283 - Brennerstart.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;284&#39; : &#39;284 - Erste Sicherheitszeit: Die Gasarmatur wird geöffnet.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;290&#39; : &#39;290 - Brennerautomat oder HCM-Modul ist defekt. - Verkabelung und Steckverbindung des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;305&#39; : &#39;305 - Das Zeitintervall für die Wasser-Warmhaltung ist noch nicht erreicht.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;306&#39; : &#39;306 - Flammenbildung (Ionisationsstrom) nach Ab- schalten des Brenners. - Wärmeblock an der Innenseite um die Zündeinrichtung reinigen. Ionisationsteil der Zündeinrichtung prüfen. Bauteil ggf. austauschen. Prüfen, ob das Gas-Luft-Verhältnis auch nach Abschalten des Brenners vorhan- den ist. Prüfen, ob die Gasarmatur auch nach Abschalten des Brenners weiterhin geöff- net ist. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;307&#39; : &#39;307 - Heizungspumpe im Gerät dreht nicht. - Heizungspumpe austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;323&#39; : &#39;323 - BUS-Kommunikation unterbrochen. - Anschlusskabel BUS-Teilnehmer prüfen, ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;328&#39; : &#39;328 - Es ist eine kurzzeitige Unterbrechung der Netz- spannung aufgetreten. - Verkabelung des Trafos prüfen (falls vorhanden). Trafo austauschen und Betriebsverhalten des Geräts prüfen. Prüfen, ob die Störung die Folge des Vorhandenseins eines Stromaggregats, ei- nes Windrads oder einer anderen Ausrüstung gewesen sein könnte, die eine Un- terbrechung verursachen kann. Elektroinstallation prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;330&#39; : &#39;330 - Externer Vorlauftemperaturfühler defekt (hydraulische Weiche). - Temperaturfühler und Anschlusskabel auf Kurzschluss prüfen, ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;331&#39; : &#39;331 - Externer Vorlauftemperaturfühler defekt (hydraulische Weiche). - Temperaturfühler und Anschlusskabel auf Unterbrechung prüfen, ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;341&#39; : &#39;341 - Die gemessene Temperatur, durch den Vorlauf- temperaturfühler oder den Rücklauftemperatur- fühler, steigt zu schnell. - Wasserdruck des Geräts prüfen und Heizungsanlage und Gerät entlüften. Prüfen, ob genügend Strömung über die Heizungsanlage möglich ist. Betriebsverhalten und Verkabelung der Pumpe und der betreffenden Fühler prüfen. Bauteil ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;342&#39; : &#39;342 - Die gemessene Temperatur, durch den Vorlauf- temperaturfühler, steigt zu schnell. - Wasserdruck des Geräts prüfen und Heizungsanlage und Gerät entlüften. Prüfen, ob genügend Strömung über die Heizungsanlage möglich ist. Betriebsverhalten und Verkabelung der Pumpe und der betreffenden Fühler prüfen. Bauteil ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;350&#39; : &#39;350 - Vorlauftemperaturfühler defekt (Kurzschluss). - Wenn die blockierende Störung längere Zeit bestehen bleibt, wird aus der blockie- renden Störung eine verriegelnde Störung. Temperaturfühler und Anschlusskabel auf Kurzschluss prüfen, ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;351&#39; : &#39;351 - Vorlauftemperaturfühler defekt (Unterbre- chung). - Wenn die blockierende Störung längere Zeit bestehen bleibt, wird aus der blockie- renden Störung eine verriegelnde Störung. Temperaturfühler und Anschlusskabel auf Unterbrechung prüfen, ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;356&#39; : &#39;356 - Netzspannung niedriger als erlaubt. - Prüfen, ob die Störung die Folge des Vorhandenseins eines Stromaggregats, ei- nes Windrads oder einer anderen Ausrüstung gewesen sein könnte, die eine Un- terbrechung verursachen kann. Elektroinstallation prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;357&#39; : &#39;357 - Entlüftungsbetrieb.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;358&#39; : &#39;358 - Blockierschutz für Heizungspumpe und 3-WegeVentil.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;360&#39; : &#39;360 - Des angebrachte HCM-Modul korrespondiert nicht mit dem Brennerautomaten. - HCM-Modul-Nummer kontrollieren. Anbringen des HCM-Moduls mit der korrekten HCM-Modul-Nummer.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;361&#39; : &#39;361 - Der angebrachte Brennerautomat korrespon- diert nicht mit dem HCM-Modul. - Nummern auf dem Brennerautomaten kontrollieren. Anbringen des HCM-Moduls mit der korrekten HCM-Modul-Nummer.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;364&#39; : &#39;364 - Gasarmatur schließt nicht korrekt. - Verkabelung und Steckverbindung der Gasarmatur prüfen. Gasarmatur austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;365&#39; : &#39;365 - Gasarmatur schließt nicht korrekt. - Verkabelung und Steckverbindung der Gasarmatur prüfen. Gasarmatur austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;390&#39; : &#39;390 - Brennerautomaten liest falschen Wert im HCMModul. - HCM-Modul austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;537&#39; : &#39;537 - Keine Drehzahlrückmeldung vom Gebläse. - Anschlussstecker für die Drehzahlregelung am Gebläse aufstecken. Anschlussstecker für die Spannungsversorgung am Gebläse aufstecken. Anschlusskabel für die Drehzahlregelung zwischen Gebläse und Feuerungs- automat (SAFe) austauschen. Anschlusskabel (230 vAC) zwischen Gebläse und Feuerungsautomat (SAFe) aus- tauschen. Feuerungsautomat (SAFe) austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;550&#39; : &#39;550 - Netzspannung zu niedrig. - Versorgungsspannung von mindestens 196 VAC herstellen. Feuerungsautomat (SAFe) austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;560&#39; : &#39;560 - Luftdruckschalter offen. - Jegliche Blockade entfernen. Luftdruckschalter wieder anschließen. Luftdruckschalter ersetzen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;604&#39; : &#39;604 - Anlagenstörung Feuerungsautomat. - Feuerungsautomat (SAFe) austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;810&#39; : &#39;810 - Warmwasser bleibt kalt. - Evtl. ständige Warmwasserentnahme unterbinden. Warmwasser-Temperaturfühler richtig positionieren. Warmwasserbereitung auf „Vorrang“ einstellen. Evtl. entlüften. Bei Störungen in der Verrohrung dies beheben. Wenn Abweichungen bestehen, die Pumpe austauschen. Zirkulationsleitung prüfen. Bei Abweichungen zu den Tabellenwerten den Fühler austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;811&#39; : &#39;811 - Warmwasserbereitung: Thermische Desinfekti- on misslungen. - Evtl. ständige Warmwasserentnahme unterbinden. Warmwasser-Temperaturfühler richtig positionieren. Warmwasserbereitung auf „Vorrang“ einstellen. Evtl. entlüften. Bei Störungen in der Verrohrung dies beheben. Wenn Abweichungen bestehen, die Pumpe austauschen. Zirkulationsleitung prüfen. Bei Abweichungen zu den Tabellenwerten den Fühler austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;815&#39; : &#39;815 - Temperaturfühler hydraulische Weiche defekt. - Fühleranschluss prüfen. Weichenfühler auf falsche Einbauposition oder auf Bruchstelle prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;1011&#39; : &#39;1011 - Vom Abgastemperaturfühler gemessene Tem- peratur ist zu hoch. - Verkabelung des Temperaturfühlers prüfen. Temperaturfühler prüfen, ggf. austauschen. Anschlusskabel auf Unterbrechung oder Kurzschluss prüfen, ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;1012&#39; : &#39;1012 - Das Gebläse läuft unregelmäßig. - Verkabelung und Steckverbindungen des Gebläses prüfen. Betriebsverhalten des Geräts durch Austauschen des Gebläses prüfen. Steckverbindungen des Brennerautomaten prüfen. Brennerautomaten austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;1013&#39; : &#39;1013 - Das Inspektionsintervall ist erreicht. Bitte Inspektion durchführen. - Inspektion durchführen. Nicht blockierende Störung zurücksetzen (erforderlich).&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;1014&#39; : &#39;1014 - Aktuelle Ionisation ist zu niedrig. - Wartung durchführen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;1017&#39; : &#39;1017 - Der Betriebsdruck ist niedrig. - Heizungsanlage bis zu 2 bar füllen. Ausdehnungsgefäß prüfen. Heizungsanlage auf undichte Stellen prüfen. Verkabelung und Funktion des Druckfühlers prüfen. Bauteil ggf. austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;1018&#39; : &#39;1018 - Service Zeit abgelaufen. - Wartung durchführen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;1019&#39; : &#39;1019 - Falscher Pumpentyp detektiert. - Pumpenkennfeld korrekt einstellen. Steckverbindungen und Kabelbaum auf Kontakt prüfen. Gerät aus- und wieder einschalten. Pumpe austauschen und Betriebsverhalten des Geräts prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;1021&#39; : &#39;1021 - Kaltwassertemperaturfühler des Schichtlade- speichers defekt. - Gerät aus- und wieder einschalten. Verbindungsleitung zum Schichtladespeicherfühler (SLS) reparieren bzw. aus- tauschen. Fühler austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;1022&#39; : &#39;1022 - Speichertemperaturfühler defekt oder Kontakt- probleme. - Angezeigte Speichertemperatur auf Plausibilität prüfen. Steckverbindungen und Kabelbaum auf Kontakt prüfen. Grundeinstellungen zurücksetzen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;1023&#39; : &#39;1023 - Eingestellte Wartungszeit ist überschritten. Wartung erforderlich. - Wartung am Gerät ausführen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;1025&#39; : &#39;1025 - Rücklauftemperaturfühler ist defekt. - Verbindungsleitung zum Rücklauftemperaturfühler reparieren bzw. austauschen. Fühler austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;1065&#39; : &#39;1065 - Wasserdruckfühler defekt oder nicht ange- schlossen. - Anschlussstecker am Wasserdruckfühler korrekt aufstecken. Anschlusskabel zum Wasserdruckfühler austauschen. Wasserdruckfühler austauschen. Steuergerät austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;1068&#39; : &#39;1068 - Außentemperaturfühler oder Lambdasonde de- fekt. - Kontaktproblem beseitigen. Lambdasonde austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2085&#39; : &#39;2085 - Interner Fehler. - Entriegeln. Anlage für 30 Sekunden spannungsfrei schalten. Feuerungsautomat ersetzen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2626&#39; : &#39;2626 - Anlagenstörung Geräteelektronik. - Geräteelektronik austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2908&#39; : &#39;2908 - Anlagenstörung Geräteelektronik / Basiscontroller. - Bleibt die Störung nach Reset erhalten, ist der Feuerungsautomat oder Fremdbrennermodul defekt und muss ausgetauscht werden.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2909&#39; : &#39;2909 - Anlagenstörung Geräteelektronik / Basiscontroller. - Bleibt die Störung nach Reset erhalten, ist der Feuerungsautomat oder Fremdbrennermodul defekt und muss ausgetauscht werden.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2910&#39; : &#39;2910 - Fehler im Abgassystem. - Abgassystem montieren. Ablagerungen im Abgassystem entfernen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2911&#39; : &#39;2911 - Kalibrierung fehlgeschlagen. - Fehlerhafte Komponente ersetzen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2912&#39; : &#39;2912 - Kein Flammensignal während der Kalibrierung. - Fehlerhafte Komponente ersetzen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2913&#39; : &#39;2913 - Flammensignal zu niedrig in der Kalibrierung. - Fehlerhafte Komponente ersetzen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2914&#39; : &#39;2914 - Anlagenstörung Geräteelektronik. - Bleibt die Störung nach Reset erhalten, ist die Gerätesteuerung oder das Brennermodul defekt und muss ausgetauscht werden.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2915&#39; : &#39;2915 - Anlagenstörung Geräteelektronik. - Gerät zurücksetzen. Eine Wärmeanforderung angeben. Wärmeanforderung beenden. Wenn der Fehler danach wieder auftritt, ist der Brennerregler defekt und muss ausgetauscht werden.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2916&#39; : &#39;2916 - Anlagenstörung Geräteelektronik. - Gerät zurücksetzen. Eine Wärmeanforderung angeben. Wärmeanforderung beenden. Wenn der Fehler danach wieder auftritt, ist der Brennerregler defekt und muss ausgetauscht werden.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2917&#39; : &#39;2917 - Kein Flammensignal während der Überprüfung der Verbrennungsregelung. - Gerät ausschalten. Eine Wärmeanforderung angeben. 5 Minuten warten. Wenn der Fehler innerhalb dieser Zeit wieder auftritt, Gerät zu- rücksetzen, ohne Strom zu trennen. Dadurch wird eine Kalibrierung der Ionisationsschaltungen ausgelöst. Wenn der Fehler nach der Kalibrierung wieder auftritt, ist der Brennerregler de- fekt und muss ausgetauscht werden. Abgasanlage auf mögliche Rezirkulation prüfen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2918&#39; : &#39;2918 - Störung in der Verbrennungsregelung. - Siphon reinigen und das Gerät entwässern (Gasseite).&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2919&#39; : &#39;2919 - Störung in der Verbrennungsregelung. - Fehlerhafte Komponente ersetzen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2920&#39; : &#39;2920 - Störung Flammenüberwachung. - Feuerungsautomat austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2921&#39; : &#39;2921 - Geräteelektronik im Testmode. - Keine Maßnahme erforderlich (Wärmeerzeuger startet automatisch).&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2922&#39; : &#39;2922 - Anlagenstörung Geräteelektronik. - Feuerungsautomat austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2923&#39; : &#39;2923 - Anlagenstörung Geräteelektronik. - Geräteelektronik austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2926&#39; : &#39;2926 - Anlagenstörung Geräteelektronik. - Geräteelektronik austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2927&#39; : &#39;2927 - Flamme während Brennerbetrieb ausgefallen. - Hauptabsperreinrichtung öffnen. Geräteabsperrhahn öffnen. Gerät stilllegen und Gasleitung überprüfen. Signalauswertung auf Leiterplatte defekt. Überwachungselektrode austauschen. Schutzleiteranschluss (PE) im Steuergerät herstellen. Zündleitung austauschen. Anschlusskabel zur Überwachungselektrode austauschen. Gasarmatur austauschen.&#39;,</span><span class=w></span>
<span class=w>        </span><span class=no>&#39;2928&#39; : &#39;2928 - Interner Fehler. - Feuerungsautomat austauschen.&#39;</span><span class=w></span>
<span class=w>      </span><span class=no>}</span><span class=w></span>
<span class=w>    </span><span class=no>%}</span><span class=w></span>
<span class=w>    </span><span class=no>{% set state = states(&#39;sensor.heizung_ems_esp_boiler_statusmeldungsnummer&#39;) %}</span><span class=w></span>
<span class=w>    </span><span class=no>{% set message = mapper[state] if state in mapper %}</span><span class=w></span>
<span class=w>    </span><span class=no>{{ message }}</span><span class=w></span>
</code></pre></div> </td></tr></table> <h2 id=using-a-custom-climate-component-in-home-assistant>Using a custom Climate component in Home Assistant<a class=headerlink href=#using-a-custom-climate-component-in-home-assistant title="Permanent link">~</a></h2> <p><em>(by @elRadix)</em> from <a href=https://github.com/emsesp/EMS-ESP32/discussions/790#discussioncomment-4895520>https://github.com/emsesp/EMS-ESP32/discussions/790#discussioncomment-4895520</a></p> <p>This example sets up 2 climate entities for dhw with their mode and heating climate using a custom HACS card in HA <a href=https://github.com/nervetattoo/simple-thermostat>https://github.com/nervetattoo/simple-thermostat</a> like:</p> <p><img alt=customha src=../_media/examples/ha_custom_climate.jpg></p> <table class=highlighttable><tr><th colspan=2 class=filename><div class=highlight><span class=filename>configuration.yaml</span></div></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=nt>mqtt</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>sensor</span><span class=p>:</span><span class=w></span>

<span class=w>  </span><span class=nt>climate</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">boiler</span><span class=w></span>
<span class=w>      </span><span class=nt>unique_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bosh_boiler</span><span class=w></span>
<span class=w>      </span><span class=nt>min_temp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">35</span><span class=w></span>
<span class=w>      </span><span class=nt>max_temp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">60</span><span class=w></span>
<span class=w>      </span><span class=nt>temp_step</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class=w></span>
<span class=w>      </span><span class=nt>current_temperature_topic</span><span class=p>:</span><span class=w> </span><span class=s>&#39;ems-esp/boiler_data_ww&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>temperature_state_topic</span><span class=p>:</span><span class=w> </span><span class=s>&#39;ems-esp/boiler_data_ww&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>temperature_command_topic</span><span class=p>:</span><span class=w> </span><span class=s>&#39;ems-esp/boiler/wwseltemp&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>temperature_command_template</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;</span><span class=w></span>
<span class=w>        </span><span class=no>{{ &#39;{&quot;cmd&quot;:&quot;wwseltemp &quot;,&quot;data&quot;:&#39;}}</span><span class=w></span>
<span class=w>        </span><span class=no>{{ value }}</span><span class=w></span>
<span class=w>        </span><span class=no>{{ &#39;}&#39;}}</span><span class=w></span>
<span class=w>      </span><span class=nt>current_temperature_template</span><span class=p>:</span><span class=w> </span><span class=s>&#39;{{</span><span class=nv> </span><span class=s>value_json.wwcurtemp</span><span class=nv> </span><span class=s>}}&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>temperature_state_template</span><span class=p>:</span><span class=w> </span><span class=s>&#39;{{</span><span class=nv> </span><span class=s>value_json.wwseltemp</span><span class=nv> </span><span class=s>}}&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>mode_state_template</span><span class=p>:</span><span class=w> </span><span class=s>&quot;{%</span><span class=nv> </span><span class=s>if</span><span class=nv> </span><span class=s>value_json.wwactivated</span><span class=nv> </span><span class=s>==</span><span class=nv> </span><span class=s>&#39;off&#39;</span><span class=nv> </span><span class=s>%}</span><span class=nv> </span><span class=s>off</span><span class=nv> </span><span class=s>{%</span><span class=nv> </span><span class=s>else</span><span class=nv> </span><span class=s>%}</span><span class=nv> </span><span class=s>heat</span><span class=nv> </span><span class=s>{%</span><span class=nv> </span><span class=s>endif</span><span class=nv> </span><span class=s>%}&quot;</span><span class=w></span>
<span class=w>      </span><span class=nt>mode_state_topic</span><span class=p>:</span><span class=w> </span><span class=s>&#39;ems-esp/boiler_data_ww&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>mode_command_topic</span><span class=p>:</span><span class=w> </span><span class=s>&#39;ems-esp/boiler/wwactivated&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>mode_command_template</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;</span><span class=w></span>
<span class=w>        </span><span class=no>{{ &#39;{&quot;cmd&quot;:&quot;wwactivated&quot;,&quot;data&quot;:&quot;&#39;}}</span><span class=w></span>
<span class=w>        </span><span class=no>{%- if value == &#39;off&#39; -%}off{% else %}on{%- endif -%}</span><span class=w></span>
<span class=w>        </span><span class=no>{{&#39;&quot;}&#39;}}</span><span class=w></span>
<span class=w>      </span><span class=nt>modes</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;heat&#39;</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;off&#39;</span><span class=w></span>
<span class=w>      </span><span class=c1># use fan mode as proxy to set comfort mode</span><span class=w></span>
<span class=w>      </span><span class=nt>fan_mode_command_topic</span><span class=p>:</span><span class=w> </span><span class=s>&#39;ems-esp/boiler/wwcomfort&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>fan_mode_command_template</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;</span><span class=w></span>
<span class=w>        </span><span class=no>{{ &#39;{&quot;cmd&quot;:&quot;wwcomfort&quot;,&quot;data&quot;:&quot;&#39;}}</span><span class=w></span>
<span class=w>        </span><span class=no>{%- if value == &#39;eco&#39; -%}eco{%-elif value == &#39;hot&#39; -%}hot{%- else -%}intelligent{%- endif -%}</span><span class=w></span>
<span class=w>        </span><span class=no>{{&#39;&quot;}&#39;}}</span><span class=w></span>
<span class=w>      </span><span class=nt>fan_mode_state_topic</span><span class=p>:</span><span class=w> </span><span class=s>&#39;ems-esp/boiler_data_ww&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>fan_mode_state_template</span><span class=p>:</span><span class=w> </span><span class=s>&#39;{{</span><span class=nv> </span><span class=s>value_json.wwcomfort</span><span class=nv> </span><span class=s>}}&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>fan_modes</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;eco&#39;</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;hot&#39;</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;intelligent&#39;</span><span class=w></span>

<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">heating</span><span class=w></span>
<span class=w>      </span><span class=nt>unique_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bosh_heating</span><span class=w></span>
<span class=w>      </span><span class=nt>min_temp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">30</span><span class=w></span>
<span class=w>      </span><span class=nt>max_temp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class=w></span>
<span class=w>      </span><span class=nt>temp_step</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class=w></span>
<span class=w>      </span><span class=nt>current_temperature_topic</span><span class=p>:</span><span class=w> </span><span class=s>&#39;ems-esp/boiler_data&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>temperature_state_topic</span><span class=p>:</span><span class=w> </span><span class=s>&#39;ems-esp/boiler_data&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>temperature_command_topic</span><span class=p>:</span><span class=w> </span><span class=s>&#39;ems-esp/boiler&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>temperature_command_template</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;</span><span class=w></span>
<span class=w>        </span><span class=no>{{ &#39;{&quot;cmd&quot;:&quot;heatingtemp&quot;,&quot;data&quot;:&#39;}}</span><span class=w></span>
<span class=w>        </span><span class=no>{{ value }}</span><span class=w></span>
<span class=w>        </span><span class=no>{{ &#39;}&#39;}}</span><span class=w></span>
<span class=w>      </span><span class=nt>current_temperature_template</span><span class=p>:</span><span class=w> </span><span class=s>&#39;{{</span><span class=nv> </span><span class=s>value_json.curflowtemp</span><span class=nv> </span><span class=s>}}&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>temperature_state_template</span><span class=p>:</span><span class=w> </span><span class=s>&#39;{{</span><span class=nv> </span><span class=s>value_json.heatingtemp</span><span class=nv> </span><span class=s>}}&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>mode_state_template</span><span class=p>:</span><span class=w> </span><span class=s>&quot;{%</span><span class=nv> </span><span class=s>if</span><span class=nv> </span><span class=s>value_json.heatingactivated</span><span class=nv> </span><span class=s>==</span><span class=nv> </span><span class=s>&#39;off&#39;</span><span class=nv> </span><span class=s>%}</span><span class=nv> </span><span class=s>off</span><span class=nv> </span><span class=s>{%</span><span class=nv> </span><span class=s>else</span><span class=nv> </span><span class=s>%}</span><span class=nv> </span><span class=s>heat</span><span class=nv> </span><span class=s>{%</span><span class=nv> </span><span class=s>endif</span><span class=nv> </span><span class=s>%}&quot;</span><span class=w></span>
<span class=w>      </span><span class=nt>mode_state_topic</span><span class=p>:</span><span class=w> </span><span class=s>&#39;ems-esp/boiler_data&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>mode_command_topic</span><span class=p>:</span><span class=w> </span><span class=s>&#39;ems-esp/boiler&#39;</span><span class=w></span>
<span class=w>      </span><span class=nt>mode_command_template</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;</span><span class=w></span>
<span class=w>        </span><span class=no>{{ &#39;{&quot;cmd&quot;:&quot;heatingactivated&quot;,&quot;data&quot;:&quot;&#39;}}</span><span class=w></span>
<span class=w>        </span><span class=no>{%- if value == &#39;off&#39; -%}off{% else %}on{%- endif -%}</span><span class=w></span>
<span class=w>        </span><span class=no>{{&#39;&quot;}&#39;}}</span><span class=w></span>
<span class=w>      </span><span class=nt>modes</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;heat&#39;</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;off&#39;</span><span class=w></span>
</code></pre></div> </td></tr></table> <table class=highlighttable><tr><th colspan=2 class=filename><div class=highlight><span class=filename>HACS card</span></div></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">custom:simple-thermostat</span><span class=w></span>
<span class=nt>entity</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">climate.boiler</span><span class=w></span>
<span class=nt>sensors</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">state</span><span class=w></span>
<span class=w>    </span><span class=nt>label</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">State</span><span class=w></span>
<span class=w>    </span><span class=nt>template</span><span class=p>:</span><span class=w> </span><span class=s>&#39;{{hvac_action}}&#39;</span><span class=w></span>
<span class=nt>label</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>state</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Warm Water</span><span class=w></span>
<span class=nt>layout</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>mode</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>names</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class=w></span>
<span class=w>    </span><span class=nt>icons</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class=w></span>
<span class=w>    </span><span class=nt>headings</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class=w></span>
<span class=w>  </span><span class=nt>step</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">column</span><span class=w></span>
<span class=nt>step_size</span><span class=p>:</span><span class=w> </span><span class=s>&#39;1&#39;</span><span class=w></span>
<span class=nt>control</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>hvac</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=s>&#39;off&#39;</span><span class="p p-Indicator">:</span><span class=w></span>
<span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Warm Water Off</span><span class=w></span>
<span class=w>    </span><span class=nt>heat</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Warm Water On</span><span class=w></span>
<span class=w>  </span><span class=nt>fan</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>eco</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eco</span><span class=w></span>
<span class=w>    </span><span class=nt>hot</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">hot</span><span class=w></span>
<span class=w>    </span><span class=nt>intelligent</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">smart</span><span class=w></span>
<span class=nt>decimals</span><span class=p>:</span><span class=w> </span><span class=s>&#39;1&#39;</span><span class=w></span>
<span class=nt>hide</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>state</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class=w></span>
<span class=nt>header</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>toggle</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>entity</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">switch.ketel</span><span class=w></span>
<span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">power</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Boiler</span><span class=w></span>
<span class=nt>view_layout</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>position</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">main</span><span class=w></span>
</code></pre></div> </td></tr></table> <h2 id=automating-the-onoff-of-the-heat-pump-in-home-assistant>Automating the on/off of the heat pump in Home Assistant<a class=headerlink href=#automating-the-onoff-of-the-heat-pump-in-home-assistant title="Permanent link">~</a></h2> <p><code>waengr</code> on our Discord channel posted an <a href=https://discord.com/channels/816637840644505620/816958041345884180/1287897271148609566>message</a> on how to automate a simple switch to turn on and off the heat pump. He references GitHub issues <a href=https://github.com/emsesp/EMS-ESP32/discussions/1600>https://github.com/emsesp/EMS-ESP32/discussions/1600</a> and <a href=https://github.com/emsesp/EMS-ESP32/issues/1717>https://github.com/emsesp/EMS-ESP32/issues/1717</a>.</p> <p>In his own words, this is what he did:</p> <p>"I went with analyzing the input binary string as suggested, which was provided by EMS-ESP in <code>text.boiler_hpin1opt</code> shown in Home Assistant. I changed the toggles on the pump's UI and watched the string change. Then I manually changed the string in Home Assistant and watched the pump's UI changing. So bidirectional communication is possible!</p> <p>I haven't tried out all options yet, but here are a few comments:</p> <ul> <li>I thought I was smart by thinking ahead, so when selecting "Kompressorbetr. sperren" (block compressor operation) I have also selected "Zuheizerbetr. sperren" (block auxiliary heater). BUT - I shit you not - ONLY aux actually came on wasting a lot of power (at least for a few minutes).</li> <li>"Heizbetrieb sperren" (block heating operation) also shuts down the circulation pump, which is not what I want since I have a 500 L buffer tank.</li> <li>"EVU-Sperrzeit 1" (power company block time 1) works nicely so far (what are the other EVU-Sperrzeit for?)</li> </ul> <p>Next was changing the string with automations.</p> <p>For the time being, I am going with fixed times: A heating period during the night when we have low tariff and then another around noon where I might have some excess PV power. I can later tinker around with hooking it to actuall PV production. I am just changing the first bit which is to invert the always off input "Eingang invertiert" (invert input) as suggested. The second bit is "EVU-Sperrzeit 1".</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=nt>automation heating</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=s>&#39;heating_on_by_time&#39;</span><span class=w></span>
<span class=w>    </span><span class=nt>alias</span><span class=p>:</span><span class=w> </span><span class=s>&#39;Allow</span><span class=nv> </span><span class=s>heating</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>operate</span><span class=nv> </span><span class=s>at</span><span class=nv> </span><span class=s>fixed</span><span class=nv> </span><span class=s>times</span><span class=nv> </span><span class=s>(low</span><span class=nv> </span><span class=s>tariff</span><span class=nv> </span><span class=s>/</span><span class=nv> </span><span class=s>expected</span><span class=nv> </span><span class=s>PV)&#39;</span><span class=w></span>
<span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Controls boiler_hpin1opt based on specified times</span><span class=w></span>
<span class=w>    </span><span class=nt>trigger</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>platform</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">time</span><span class=w></span>
<span class=w>        </span><span class=nt>at</span><span class=p>:</span><span class=w> </span><span class=s>&#39;20:00:00&#39;</span><span class=w></span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>platform</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">time</span><span class=w></span>
<span class=w>        </span><span class=nt>at</span><span class=p>:</span><span class=w> </span><span class=s>&#39;10:00:00&#39;</span><span class=w></span>
<span class=w>    </span><span class=nt>action</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>service</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">text.set_value</span><span class=w></span>
<span class=w>        </span><span class=nt>target</span><span class=p>:</span><span class=w></span>
<span class=w>          </span><span class=nt>entity_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">text.boiler_hpin1opt</span><span class=w></span>
<span class=w>        </span><span class=nt>data</span><span class=p>:</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&#39;010000000000000&#39;</span><span class=w></span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=s>&#39;heating_off_by_time&#39;</span><span class=w></span>
<span class=w>    </span><span class=nt>alias</span><span class=p>:</span><span class=w> </span><span class=s>&#39;Disallow</span><span class=nv> </span><span class=s>heating</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>operate</span><span class=nv> </span><span class=s>at</span><span class=nv> </span><span class=s>fixed</span><span class=nv> </span><span class=s>times</span><span class=nv> </span><span class=s>(low</span><span class=nv> </span><span class=s>tariff</span><span class=nv> </span><span class=s>/</span><span class=nv> </span><span class=s>expected</span><span class=nv> </span><span class=s>PV)&#39;</span><span class=w></span>
<span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Controls boiler_hpin1opt based on specified times</span><span class=w></span>
<span class=w>    </span><span class=nt>trigger</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>platform</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">time</span><span class=w></span>
<span class=w>        </span><span class=nt>at</span><span class=p>:</span><span class=w> </span><span class=s>&#39;06:00:00&#39;</span><span class=w></span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>platform</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">time</span><span class=w></span>
<span class=w>        </span><span class=nt>at</span><span class=p>:</span><span class=w> </span><span class=s>&#39;16:00:00&#39;</span><span class=w></span>
<span class=w>    </span><span class=nt>action</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>service</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">text.set_value</span><span class=w></span>
<span class=w>        </span><span class=nt>target</span><span class=p>:</span><span class=w></span>
<span class=w>          </span><span class=nt>entity_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">text.boiler_hpin1opt</span><span class=w></span>
<span class=w>        </span><span class=nt>data</span><span class=p>:</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&#39;110000000000000&#39;</span><span class=w></span>
</code></pre></div> </td></tr></table> <p>Here is my work-in-progress dashboard in Home Assistant:</p> <p><img alt=Dashboard src=../_media/screenshot/PV_HA_dash.png></p> <ul> <li>left: <code>text.boiler_hpin1opt</code> and the above automations to change it to "on" and "off".</li> <li>top right: a hand drawn schema where I try to map some of the 200+ values from EMS-ESP.</li> <li>bottom right: the 200+ values.</li> </ul> <p>"</p> <p>The next thing he is investigating is how to obtain a clear power reading (in W) of how much power the heatpump currently uses.</p> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">September 26, 2024</span> </small> </div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../FAQ/ class="md-footer__link md-footer__link--prev" aria-label="Previous: FAQ" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> FAQ </div> </div> </a> <a href=../Contact/ class="md-footer__link md-footer__link--next" aria-label="Next: Contact" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Contact </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 emsesp.org (@proddy, @MichaelDvP) </div> </div> <div class=md-social> <a href=https://discord.gg/3J3GgnzpyT target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg> </a> <a href=https://github.com/emsesp/EMS-ESP32 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking"], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../assets/javascripts/bundle.748e2769.min.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js></script> <script src=../extra_javascript/tablesort.js></script> <script src=../extra_javascript/github.js></script> </body> </html>